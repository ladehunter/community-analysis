# 2019年08月19日 - - 2019年08月23日 周总结
# 刘晓旭
### 窗口兼容模式功能
  - 1.review、整理oto8手机兼容模式需求功能代码，并push至服务器。
  - 2.协助尝试设计、实现app在兼容模式下运行，建立Configuration、CompatContextImpl、Display三者之间联系，已初步实现功能。
  - 3.协助通过demo对比oto8、华为m6，返回给应用的相关多窗口的屏幕数据。
  
# 罗浩
### 窗口兼容模式功能
  - 1.reviewto8手机兼容模式需求功能代码.
  - 2.协助尝试设计、实现app在兼容模式下运行，建立Configuration、CompatContextImpl、Display三者之间联系，已初步实现功能。
  - 3.分析和多窗口运行有关的API，协助设计通过demo对比oto8、华为m6，返回给应用的相关多窗口的屏幕数据。
  - 4.尝试在最新的兼容模式基础上修复京东的bug，待提交

# 2019年08月12日 - - 2019年08月16日 周总结
# 刘晓旭
### 窗口兼容模式功能
  - 1.bug：学堂在线横屏播放视频显示不完整
  - 2.bug：微信（705）聊天页面文本输入框长按文字没有菜单（只有窗口在屏幕左上方的情况下才有
  - 3.bug：微信（705）聊天页面文本输入框右键菜单跑偏
  - 4.bug：微信（705）超过两行的聊天消息长按不弹出菜单
  - 5.整理oto8手机兼容模式需求功能代码
  
# 罗浩
### 多窗口及窗口兼容模式功能
  - 1.bilibili全屏按钮无效问题
  - 2.协助解决学堂在线横屏视频显示不完整问题
  - 3.尝试通过runmode和onconfigurationchanged实现动态的隶属于兼容模式context的display内容
  - 4.协助整理oto8兼容弄模式功能代码

# 2019年08月05日 - - 2019年08月09日 周总结
# 刘晓旭
### 窗口兼容模式功能
  - 1.调试、整理oto8微信登录按钮重叠bug的解决方案，自测没问题，已提交测试组测试。
  - 2.分析oto8微信，editor长按内容，光标位置错位，以及文本编辑功能弹窗位置错乱bug；
    - 1.分析定位文本编辑功能弹窗错位bug，弹窗的显示区域是在FloatingActionMode.java的isContentRectWithinBounds方法中设置的，是通过Display的getRealSize方法获取屏幕宽高，设置整个屏幕为显示区域，而对于微信窗口，getRealSize获取的是当前窗口的大小，从而导致其位置显示不正常。
    - 2.分析内容光标位置错位bug，由于对微信适配，在微信专属的NewPhoneWindow中，针对FakeDecor的transforParent方法做适配，导致光标位置错位，目前设计的解决方案，在光标位置更新的地方，通过判断RootView是否是FakeDecor，对光标位置的y方向进行修正，解决此问题。

# 罗浩
### 多窗口
  - 1.基本解决京东APK窗口周围白边的问题。问题的具体成因是apk调用了canvas的drawcolor方法来绘制背景，而drawcolor方法会直接将整个Layer按照给定MODE绘制为给定颜色。在多窗口模式下，frameworks/base中定义了变量surfaceinsect，其大小根据dpi浮动，在创建surface时会在窗口原有大小的基础上将surfaceinset加到宽高上，使得申请的surface比窗口在上下左右方向各大出一部分，其目的不明确但猜测是通过native的方式来绘制窗口周围的阴影。由于drawcolor会直接绘制整个surface所处的layer，导致会将由于上述原因多出的部分也进行绘制，因此导致周围存在白色区域。解决方案是对drawcolor方法进行扩展，将其中的clipbase中的用于控制绘制区域的bounds进行调整，数据源则选取和窗口逻辑大小一直的canvas大小，在canvas调用drawcolor时将其宽高传入，并根据传入数值来界定绘制区域，保证不会有过渡绘制。京东仍存在一些多窗口问题，会继续解决。


# 2019年07月29日 - - 2019年08月02日 周总结

# 刘晓旭
### 窗口兼容模式功能
  - 1.bug：微信登录按钮重叠，经过之前分析、定位，由于资源文件没有更新，导致登录按钮获取padding值出错造成重叠，通过调用Resources的updateConfiguration方法更新资源文件信息，保证登录按钮获取正确的padding值，解决此重叠问题，目前通过在NewPhoneWindow&NewDecorView的onConfigurationChanged方法中调用Resources的updateConfiguration方法更新配置信息。通过此种解决方式，会导致登录界面更改语言，关闭重新打开后，语言不生效问题，可以在调用Resources的updateConfiguration方法时，设置Configuration的setLocales，解决此问题。

# 罗浩
### 多窗口
  - 1.分析京东窗口运行后周围白边的问题。由于白边的范围大于窗口的范围，因此绘制该白边是不可能通过Window-View体系来进行的。通过调整SurfaceInsets白边会随之变大变小，因此白边并没有获取某个固定值。根据个人目前的知识水平认为白边的存在要么是某些方式应用直接在Surface上进行了绘制，要么是应用给Surface所在的Layer赋予了某种属性。根据过去微信曾经存在的黑边问题其原因是微信赋予了Surface所在的Layer opaque属性，因此综合分析了Layer，Surface，NativeLayer，NativeSurface中存在的各种属性在白边存在与不存在时候的差异，结果上显示没有差异，因此白边不属于Layer属性导致的问题。综合分析了java层Surface，SurfaceController，Canvas的绘制和操作Log，并对部分个人认为会导致白边的操作进行了拦截，没有发现任何操作导致白边。目前认为白边可能是京东Apk中某些View直接在Surface上进行绘制导致的。但M6中没有此问题令人不解，一种可能使M6修改了SurfaceInsets导致Surface大小和窗口大小相当（Openthos中Surface会比窗口大小大一些用以显示阴影），所以即便有白色底色也不会以白边的形式显示出来。目前仍旧继续分析白边究竟是是什么并寻找解决方案，若仍无从解决且必须要解决该问题则可以修改SurfaceInsets并通过Window-View体系来为窗口增加阴影即可解决类似的由于SurfaceInsets导致的显示问题，个人认为这类问题目前出现较少，但阴影本身确实也存在著多问题（例如引用大小不定，阴影部分抖动等）具体如何修改仍应从长考虑。

# 2019年07月22日 - - 2019年07月26日 周总结

# 刘晓旭
### 窗口兼容模式功能
  - 1.协助解决bug：IT之家、微博等应用部分界面图片在兼容模式下仍然显示不全问题。
  - 2.解决bug：京东、唯品会等部分应用模式切换提示框显示不全问题。
  - 3.分析、调整测试兼容模式窗口尺寸与应用图片过大显示不全问题。
  
# 罗浩
### 窗口兼容模式功能
  - 1.解决兼容模式下图片显示不全的问题，大多数应用已经没有问题，少数应用由于资源大小固定需要调整窗口宽高来适应
  - 2.解决部分整体或局部内容应用兼容模式仍不生效的问题，问题成因主要是对于不分context的构建没有进行监控，目前基本得到解决
  - 3.分析京东窗口周围白边问题，目前可以确定该白边不属于view, surface和layer层面的问题，从window和activity层面分析仍未明确其究竟是什么，仍需时间进行分析和解决。

# 2019年07月15日 - - 2019年07月19日 周总结

# 刘晓旭
### 窗口兼容模式功能
  - 1.oto8手机兼容模式技术交流汇报。
  - 2.整理oto8手机兼容模式相关API函数列表。
  - 3.分析oto8微信7.0.5聊天界面，右上角弹窗位置错位问题，经过分析定位，是由于之前NewPhoneWindow中getWindowVisibleDisplayFrame方法提交缺失内容引起，增加缺失内容，此问题，以及个人朋友圈时间条目错位问题均可解决。
  - 4.协助解决bug：部分应用强制横竖屏模式时标题栏按钮偏移严重（例如：影梭、wps邮箱的查看邮件页面、愤怒的小鸟进入游戏时、buttons and scissors进入游戏时、微博）。
  - 5.分析oto8微信7.0.5长按消息，文字选择光标以及弹窗位置错乱问题，正在定位问题。

# 罗浩
### 窗口兼容模式功能
  - 1.协助参与oto8手机兼容模式技术交流汇报。
  - 2.协助解决bug：部分应用强制横竖屏模式时标题栏按钮偏移严重
  - 3.解决bug：微信705兼容模式失效，webview兼容模式不生效
  - 4.解决bug：微信登陆界面按钮重叠（自测通过待测试
  - 5.解决bug：部分应用如微信新闻/公众号等图片显示不正常
  - 6.分析仍显示不正常的图片和视频缩略图


# 2019年07月09日 - - 2019年07月12日 周总结

# 刘晓旭
### 窗口兼容模式功能
  - 1.bug：全屏模式只能通过开始菜单启动才有效，命令行、桌面图标和应用商店启动全屏模式的应用均为窗口大小。最初考虑不周，对于全屏模式只是在开始菜单做了处理，导致其他方式打开应用，全屏模式不生效，目前通过在AMS端统一处理，即可解决此问题。已完成。
  - 2.bug：部分应用强制横竖屏模式时标题栏按钮偏移严重（例如：影梭、wps邮箱的查看邮件页面、愤怒的小鸟进入游戏时、buttons and scissors进入游戏时、微博），通过测试分析，在兼容模式下运行，应用进程关闭重启，会导致应用的屏幕缩放density会还原为屏幕默认density，从而导致标题栏按钮偏移严重，正在设计解决方案。

# 罗浩
### 窗口兼容模式功能
  - 1.webview问题基本的到解决，并考量在Context中增加通用接口让持有者判断所持Context是否为NewContext来对特定情况作出反馈，来进一步保证控制流的完整。WebView问题可以通过在DisplayManager中根据所持Context类型对返回的Display进行标记，得到标记的Display在提供getRealMetrics接口的数据时对其进行伪装，保证兼容模式下WebView的大小和其余组件一致。在微信704版本上测试通过
  - 2.对于微信公众号/部分订阅号中图片显示不全的问题根源在于显示图片的容器大小是根据返回的DisplayMetrics的heightPixels来决定的。根据之前刘总的要求，同意返回1080x1920的纵向分辨率，或者返回1920x1080的横向分辨率，这使得直接使用该数值进行计算来决定高度的控件处在一个错误的高度上。若直接更改兼容模式锁定的分辨率这一问题会迎刃而解。但会导致与刘总的需求不符。若不更该这一分辨率则需要全面地对View的Measure进行干涉，首先需要判断该View是否在决定大小时使用了屏幕分辨率，其次要对其实际大小进行更改，更改时机还要正确足以覆盖应用本身对其的控制。这样看来这一做法将非常复杂。经过二人小组讨论，应用所使用的资源，字体大小等内容都是由dpi决定的，若应用所使用的dpi由兼容模式锁死，则目前所测试的应用均不会错误地加载低清晰度的资源，若存在某些应用真的以长宽来判断资深资源的加载，届时可以提供另一种将宽高锁定为1920x1080的兼容模式来适配这类应用。若存在相矛盾的应用则再提供更精细的兼容模式来保证其运行稳定。这种策略更加符合设计，也更加方便维护和灵活。
  - 3.小幅度调整高斯模糊代码并交给测试进行测试，测试由于本周更多地忙于测试兼容模式方面的问题因此收到回复较晚，测试认为没有太大问题，下周会找其他工程师进行review并考虑提交

# 2019年07月02日 - - 2019年07月08日 周总结
# 刘晓旭
### 窗口兼容模式功能
  - 1.oto8手机兼容模式切换，优化之前模式切换时停止应用进程，清除最近列表实现，修改模式切换时强制停止当前应用，再次打开应用时，模式生效。
  - 2.oto8手机兼容模式，优化应用运行模式存储方式，在AMS中增加Hashmap，通过应用packageName、运行模式键值对形式存储应用的运行模式，同时在运行模式发生变化是，更新Hashmap表信息，并存储序列化Hashmap表到系统数据库中，在系统关机重启时，AMS服务启动时，反序列化Hashmap表，用于判断createAppContext创建兼容模式NewContextImpl还是标准模式ContextImpl。

# 罗浩
### 窗口兼容模式功能
  - 1.主要分析webview显示大小不正确的问题，由于问题较为复杂分析和解决方案尝试花费了整周的时间也没有得到很好的方法。对于webview而言，微信在启动时会根据packageContext来进行大小的选择和读取，其读取方式主要根据源自display的displaymetrics进行。但packageContext只会构造一次，之后会直接使用和包名对应的已经构造好的内容，因此在使用模式切换时无法根据packageContext来反映切换后的内容。且直接修改packageContext会由于其和其他应用共用的内容而导致其他应用显示不正常，经常出现的是开始菜单会显示不正常。但若不去拦截packageContext则会100%导致第一次打开微信时webview不会根据兼容模式所指定的大小来显示。目前尚未尝试的一个可能的方法是在NewContexImpl中进行调整的同时对packageContext也进行拦截，由于切换显示模式会导致应用的强制停止，强制停止之后的微信再次运行时会去依赖NewContextImpl来进行构建自身的内容，虽然证据尚不明确（没有在源码中找到对应位置，很可能是微信自身所采取的措施），但多次实验表明这种情况下NewContextImpl的设置优先级要高于packageContext，因此不用考虑不会重新构建的packageContext因为第一次启动微信时由其决定的内容在模式切换后必将由NewContextImpl来决定，所以两者同时拦截控制是一个也许会有效的方案。
  - 2.协助设计部分兼容模式其他功能并讨论其实现细节

# 2019年06月25日 - - 2019年07月01日 周总结
# 刘晓旭
### 窗口兼容模式功能
  - 1.解决切换窗口运行模式弹窗样式不统一问题，已解决
  - 2.解决切换窗口运行模式弹窗，选择取消切换后，点击任意DecorCaption弹出提示弹窗问题，已解决；
  - 3.共同分析兼容模式获取方式的构建来似的无法获取ActivityRecord的Context也能够依据兼容模式来创建，方案：在AMS中设计存储应用运行模式静态表，用于无法获取ActivityRecord的Context也能够依据兼容模式来创建。

# 罗浩
### 高斯模糊功能
  - 1.初步整理代码
  - 2.优化计算模糊区域的性能，并分析性能损耗的重点，但没有找到合理的解决方案
### 窗口兼容模式功能
  - 1.分析微信重启后兼容模式失效的原因，找到原因并初步解决
  - 2.分析微信调整字体后兼容模式失效的原因，找到原因并初步解决
  - 3.分析微信704小程序无法使用的原因，找到原因并初步解决
  - 4.共同分析兼容模式获取方式的构建来似的无法获取ActivityRecord的Context也能够依据兼容模式来创建

# 2019年06月18日 - - 2019年06月24日 周总结
# 刘晓旭
### 窗口兼容模式功能
  - 1.优化ActivityThread中createAppContext中ContextImpl创建，设置系统应用创建ContextImpl，第三方应用创建NewContextImpl。
  - 2.oto8微信窗口显示密度是通过获取系统分辨率，动态计算得到的，目前针对微信窗口密度缩放，可以提供微信1366x768系统分辨率，这样微信计算得到的窗口密度是1.0f，从而实现在强制手机模式下，微信窗口密度的缩放。这种针对微信的缩放方式目前自测有效，已生成最新patch提供给测试进行测试。
  - 3.oto8微信窗口密度缩放，另一种实现方案：提供微信1920x1080系统分辨率，固定微信屏幕密度1.0f进行缩放，同时拦截微信动态更新屏幕密度，目前可以实现窗口4中运行模式下，除了强制手机模式横、竖屏之前无法动态切换外，其他模式之间可以实现动态切换，接下来分析强制手机模式横、竖屏之前无法动态切换的问题。

# 罗浩
### 高斯模糊功能
  - 1.模糊问题基本解决，剩余部分特殊窗口和frameworkbase方面的特殊情况的处理，较为繁琐
  - 2.性能评估上目前来看在性能较差的同方笔记本上不开启模糊的情况下12个应用会开始卡顿，开启的情况下则大约为10个，在性能较好的gigabyte上开启模糊的情况下打开20个应用也不会感觉明显卡顿
  - 3.对代码进行了初步整理，可以提交一个不尽完善的初步版本
  - 4.进一步调整了重绘和模糊的策略，小幅度提高性能，目前性能瓶颈主要在于获取模糊内容上，且没有明确的方法能够进一步优化。

# 2019年06月11日 - - 2019年06月17日 周总结
# 刘晓旭
### 窗口兼容模式功能
  - 1.修改应用窗口默认打开样式：系统应用默认打开桌面样式，第三方应用默认打开手机样式。
  - 2.解决应用在兼容模式下运行，提示“Android WebView crashed”问题。
  - 3.分析微信（7.0.3）小程序界面在兼容模式下不显示内容问题：测试发现标准模式下，修改系统分辨率后，微信小程序界面同样不显示内容，只有关机重启或者卸载重新安装，小程序界面才能显示内容，还未定位到问题原因。
  - 4.微信小程序界面是通过WebView显示的，在兼容模式下窗口分辨率不会缩放，测试在手机上同样有此问题存在。
  - 5.窗口兼容模式设计目前在微信最新版（7.0.4）上不生效，通过分析定位到微信（7.0.4）是根据9.6英寸设备并获取当前分辨率计算出适配应用窗口的密度，正在设计对于微信最新版兼容模式的解决方案。

# 罗浩
### 高斯模糊功能
  - 1.调整了外阴影的大小，取消了内阴影，目前阴影看上去更柔和且不影响透明功能
  - 2.屏幕中SysmteUI和最前窗口截图时颠倒问题已解决
  - 3.初步完成只针对背景的透明，但由于处理时机的问题，在窗口切换的时候会导致窗口在变的不透明之前先一步失去模糊
  - 4.仍需进一步整理和完善部分功能代码，例如glsl的控制以及高斯模糊专用的方法的设计


# 2019年06月04日 - - 2019年06月10日 周总结
# 刘晓旭
### 窗口兼容模式功能
  - 1.应用窗口在普通模式、全屏模式、强制手机模式（横、竖屏）之间切换已实现完成
  - 2.应用窗口在强制手机模式（横、竖屏）模式下时，窗口禁止缩放，以及窗口拖动到屏幕顶部、左右两侧时，禁止停靠。
  - 3.窗口最大化按钮只有在普通模式下可见。
  - 4.系统应用窗口，只提供普通模式、全屏模式功能切换，第三方应用提供四种功能模式切换。
  - 5.兼容模式切换时，应用需要关闭，重新打开，且关闭时，应用进程关闭，并从最近列表中清除应用信息。
  
# 罗浩
### 高斯模糊功能
  - 1.噪点问题已解决
  - 2.透明的实现会影响非背景组件，采用另一种方式实现只针对背景的透明，这一功能需要
    - 1.调整内阴影大小，目前仍需时间了解阴影的构件方式
    - 2.为content和decorview灵活设置background，不确定这种background的切换是否会带来额外的性能开销。
    - 3.处理使用各类不通drawable作为background的decorview，这种处理只能够通过经验分析完成
  - 3.提供了能够开启和关闭移动时保持模糊的镜像给UI和测试进行体验，根据反馈似乎性能影响可以接受。
  - 4.仍需分析和解决屏幕截图中systemui颠倒的问题

# 2019年05月28日 - - 2019年06月03日 周总结
# 刘晓旭
### 窗口兼容模式功能
1.目前进展：
  - UI设计：已完成
  - 功能实现：普通模式、全屏模式功能切换已完成，强制手机模式（横、竖屏）功能正在设计代码实现流程

2.问题：
  - 1、强制手机模式（横、竖屏），是对应用获取的屏幕信息进行拦截、伪装，模拟应用在手机设备上窗口运行环境。应用获取屏幕信息的两种方式：
    - 应用通过Resources资源获取的屏幕信息，已实现拦截、伪装；
    - 应用通过WindowManager.getDefaultDisplay获取屏幕信息方式需要调研如何通过通用方式进行截获。
  - 2.应用在强制手机模式下运行，图片无法满铺窗口显示问题，已定位出原因，需要设计具体实现方案。
  - 3.同一个窗口，应用在强制手机模式下打开非强制手机模式下运行应用的界面，需要设计具体实现方案。
  - 4.部分应用（例如微信）窗口化运行时，应用内PopupWindow弹窗弹出位置错乱，已定位出原因，需要设计具体实现方案。

3.6月底进展
  - 实现窗口运行模式（普通模式、全屏模式、强制手机模式（横、竖屏））切换功能
  - 实现强制手机模式下，应用通过Resources以及WindowManager.getDefaultDisplay方式获取屏幕信息截获，并伪装，实现主流应用在强制手机模式下初步适配。
  
4.功能测试
  - 不考虑解决上面提到的问题，6月15日可以提交初步功能测试

# 罗浩
### 高斯模糊功能
1.目前进展：
  - 采用kawase算法进行高斯模糊
  - 实现glsl语言的高斯模糊算法
  - 实现surfaceflinger层对高斯模糊的控制
  - 实现base到native高斯模糊相关flag和rect的传递
  - 初步实现对focus变化，窗口拖动缩放，windowlayer重新建立等事件进行响应来设置高斯模糊相关的flag和rect

2.问题：
  - 更高效高斯模糊算法由于api问题无法实现（但kawase算法已经属于比较高效的范畴）
  - 色差较大的垂直分界线附近会发生噪点（应该需要改进算法
  - 对性能的影响几乎无法避免
  - 具体机制仍需进一步讨论（全屏，窗口全屏，特殊窗口，系统窗口等的模糊方式和区域）
  - 目前只能模糊一个完整的rect，若想要模糊多个rect组成的region还需要时间

3.6月底进展
  - 尝试解决噪点问题
  - 尝试完善模糊功能
  - 尝试提高模糊性能
  
4.功能测试
  - 本周着力解决噪点问题，若能够解决下周可提交测试，之后分步完善模糊功能和提高性能

# 2019年05月21日 - - 2019年05月27日 周总结
# 刘晓旭
  - 1.拦截、伪装Resources持有的DisplayMetrics数据，微信朋友圈图片无法满铺窗口预览问题，分析由于伪装的densityDpi与Bitmap持有的density两者不一致导致的，只是让两者保持一直，微信此问题可以解决，但对于有些应用需求，两者可能需要不一致。所以初步的解决方案是特殊应用特殊处理。
  - 2.强制手机模式：拦截、伪装应用通过Context获取屏幕相关信息API，解决方案：设计兼容性ContextImpl（NewContextImpl，继承ContextImpl）实现类，重写ContextImpl的createAppContext、createActivityContext、getResources方法，拦截、伪装Resources持有的DisplayMetrics数据，并在Resources的updateConfiguration方法内拦截DisplayMetrics更新。自测此设计方案生效。
  
# 罗浩
  - 1.解决窗口处于屏幕边界处的错误显示问题
  - 2.完成从base到native的rect值传递路线，目前能够成功传递模糊rect
  - 3.进一步优化设置模糊flag的时点，自测目前的设置相对合理

# 2019年05月13日 - - 2019年05月20日 周总结

# 刘晓旭
近两周强制手机模式相关进展

以微信为例，最终实现应用在强制手机模式下运行。

之前针对微信已完成的工作包括：（1）设计新的窗口实现类NewPhoneWindow，修改view显示的层级结构，增加定义FakeDecor，同时修改接口getDecorView，返回给应用FakeDecor，避免微信操作窗口标题栏DecorCaptionView。（2）修改微信各控件屏幕坐标：拦截微信中各事件获取的坐标，在大屏幕上窗口化显示应用，Event事件获取的坐标增加窗口左上角坐标偏移值，模拟绝对坐标显示。（3）拦截、伪装微信通过资源文件获取的屏幕像素值为当前窗口宽、高。

近两周针对微信做的工作：

（1）微信获取屏幕分辨率方式：context.getResources().getDisplayMetrics()，初步设计拦截、伪装Resources持有的DisplayMetrics对象，返回给微信一套屏幕伪集。在NewPhoneWindow的getResources、onConfigurationChanged方法中拦截、伪装，微信内容部分显示生效，仅仅在NewPhoneWindow中无法做到全部拦截。

（2）接着设计在context创建时拦截、伪装Resources持有的DisplayMetrics对象。应用持有的context类型只要包括三种：Applition、Service、Activity，一个应用context的数量为1个Application+Service个数+Activity个数，而各种类型的Context提供的相关接口最终都是在ContextImpl实现类中完成的，在Activity、Service中持有ContextImpl对象实例来实现context接口调用，Activity、Service持有的ContextImpl对象是通过ContextImpl实现类中createActivityContext、createAppContext方法创建、绑定到Activity、Service中的。

（3）在ContextImpl实现类中createActivityContext、createAppContext方法中时创建了context持有的Resources对象，拦截、伪装Resources持有的DisplayMetrics对象，调试应用还是无法实现全部拦截、伪装；通过分析View获取getContext.getResources的Resources实例对象，对比ContextImpl中创建的Resources实例对象，两者不是同一个实例，因此拦截、伪装不生效，而createActivityContext、createAppContext创建context方法中LoadedApk对象表示加载过的应用apk，其持有应用的相关信息，通过LoadedApk.getApplication.getResources获取的Resources实例与View.getContext.getResources实例是同一个实例对象，对此Resources对象拦、伪装，调试应用在操作过程中会出现部分内容拦截失效，通过分析微信操作过程中DisplayMetrics参数的变化，定位到应用可以通过Resources中updateConfiguration方法更新DisplayMetrics数据，设计拦截DisplayMetrics的更新，调试微信应用，当进入朋友圈后，在回退到发现页面，DisplayMetrics数据拦截失效，且在朋友圈页面滚动数据时，出现窗口会向左上角偏移、点击错位情况，部分朋友圈信息DisplayMetrics拦截失效。分析DisplayMetrics数据，定位到在NewPhoneWindow的getSpecialDecor方法中mAppcontext.getResources.getDisplayMetrics获取的DisplayMetrics实例数据重置为默认值，通过DisplayMetrics的setTo方法更新应用获取的DisplayMetrics，导致朋友圈内容拦截失效。通过ContextImpl的getResources方法修改DisplayMetrics数据，实现拦截、伪装应用获取DisplayMetrics。

微信存在的问题：

（1）微信的初始页面，登录、注册按钮重叠问题，其是根据屏幕尺寸设置按钮margin值，拦截、伪装DisplayMetrics数据导致按钮重叠显示，而当获取真实屏幕尺寸是，按钮正常显示。

（2）微信朋友中图片显示问题，拦截、伪装DisplayMetrics数据导致朋友圈图片无法满铺窗口显示。

（3）微信朋友圈拦截失效问题，由于在NewPhoneWindow的getSpecialDecor方法中mAppcontext.getResources.getDisplayMetrics获取的DisplayMetrics实例数据重置为默认值导致此问题，但是mAppcontext.getResources获取的Resources实例没有发生变化，Resources的updateConfiguration没有被调用，DisplayMetrics的setTo没有被调用，DisplayMetrics数据如何被重置为默认值暂未分析出原因。

（4）当前应用访问其他应用界面时，拦截失效。

# 罗浩
近两周高斯模糊相关进展

完成了从Frameworks/base到frameworks/native中控制高斯模糊开启与否的开关的添加。并尝试在frameworks/base中找寻调用这一开关方法的位置，目前采用的方法是focus变化时以及layer显示到最前时进行判断，还要判断对应layer是否处于被拖动的状态。同时在native方面判断所调用的layer是否为最前的符合规定窗口类型的layer，这样来避免base到native交互的异步性质导致的瞬间错误。经过目前的调整在应用关闭时偶发模糊不生效的情况，其余情况大致没有问题。

之后在解决模糊区域和屏幕显示区域不完全重合的情况下（例如模糊窗口的一部分移动到屏幕外侧时）模糊区域的显示会出现问题，分别考察了屏幕左边，上边和右边对于模糊区域的边界影响，并调整glViewPort的界定完成了对这部分显示错误的规避。下边在影响内容的同时会对layer进行缩放，目前仍在探索如何回避下边引发的显示错位。

同时根据模糊算法，当模糊边界位于屏幕边界时，由于取到屏幕外的像素均为黑色所以会导致模糊黑边，目前分别在左右上边添加了边界判断并成功将内容传递到glsl中，大致上规避了屏幕边界的黑边。

在解决完成下边界对显示内容的影响后则会开始着手进一步完善模糊开关的时机，之后完成模糊区域数值信息从base到native的传递，并模糊。之后完成窗口的透明以保证模糊效果能口看出，并评估性能是否符合要求，预计仍需要至少3周的实现，2周后会提交最新进展。

# 2019年04月23日 - - 2019年04月29日 周总结
# 刘晓旭
  - 1.bug：oto8桌面可以缩放；
  - 2.oto8：与苗德行配合完成相机权限动态管理选择物理、虚拟摄像头功能；
  - 3.oto8：分析实现多窗口应用强制手机模式运行。

# 罗浩
  - 1.进一步分析如何实现分段pass的高斯模糊方法，目前的解决方案是通过将OpenGL与一个自己建立的Texture进行绑定，将Layer的内容画到Texture上，之后进一步以此Texutre作为下次绘制的Texture并更新RenderEngine标志，保证再绘制上一步结果所保存的Texture时采用新的模糊算法或更新参数。每当进行重新绘制时都需要对viewport进行更新，重复这一步骤直至达到模糊效果位置。对于刘总提供的论文中的数个算法而言，论文最为推崇的computeshader算法由于其中间结果处理的方式以及对OpenGL API的使用与SurfaceFlinger并不兼容，经过一番探索初步认为该方法无法作用在SurfaceFlinger的Layer绘制步骤。目前在尝试将论文中提供的另一种经典算法的改进版本作用在SurfaceFlinger中，并考察效果和性能。同时参考其他实现高斯模糊的系统rom尝试了一种新的模糊实现方式，在绘制最顶层窗口时，先将窗口下方内容重绘并进行模糊作为Texuture绘制到顶层窗口所在的Layer中，再将顶层窗口的内容绘制，当顶层窗口不发生位移的情况下，该Texture无需改变。这一方法在多窗口的基础上似乎效果并不会很好，因为多窗口每次刷新需要重绘的Layer较多，且位置以及遮挡内容频繁变化，相较之下也许不如分层计算模糊区域来的高效。目前对于算法的应用以及模糊区域的计算，模糊效果的应用等仍需进一步探讨。
  - 2.补充多窗口设计文档

# 2019年04月16日 - - 2019年04月22日 周总结
# 刘晓旭
  - 1.首次配置，权限管理器设计文档；
  - 2.完善多窗口-DecorCaption设计文档；
  
# 罗浩
  - 1.探索实现高斯模糊效果的方法，初步尝试在SurfaceFlinger中Layer渲染时通过改编RenderEngine状态来标志高斯模糊，并根据标志来调整渲染时传入GPU的glsl语句来实现single-pass的高斯模糊。对于高斯模糊的边界则是在SurfaceFlinger的computeVisibleRegion的时候一并计算，对于第一个可见的App窗口的可见区域进行获取，并通过将之后的窗口可见区域与该区域进行交运算来获取每一个Layer所需要进行高斯模糊的区域。目前仍存在的问题是不清楚如何采用分步pass的方式来连续使用glsl语句更高效地进行高斯模糊处理，以及对于非app窗口的处理方式，更进一步来说就是应该采取何种高斯模糊算法，以及刘总提供的论文中所使用的几个算法哪些能够应用在SurfaceFlinger中那些由于GL版本以及API供给亦或是处理步骤的问题不能够使用。当然，对从frameworks/base->SurfaceFlinger的整体代码设计也要在探讨清除上述问题，确定高斯模糊所带来的性能损耗是否可以接受，以及应该进行怎样的设计来权衡效果与性能的损耗之后再做定夺。
  - 2.协助完成openthos8.1多窗口设计文档的概述，多窗口的必要性，AOSP窗口管理变迁，AOSP的多窗口，其它Android多窗口，多窗口基本需求多窗口设计的概述，应用兼容性，SystemUI设计的概述，交互功能设计等章节的主题框架和附加内容撰写。

# 2019年04月09日 - - 2019年04月15日 周总结
# 刘晓旭
  - 1.oto8：最大化窗口后再以桌面模式重启，窗口会没有标题栏，完成
  - 2.oto8：最大化窗口后鼠标移到屏幕最上方拖动，窗口会没有标题栏，完成
  - 3.oto8：鼠标在窗口外较远的地方仍然可以拖动窗口，完成
  - 4.oto8：根据新的ui，修改decorcaption布局，完成50%

# 罗浩
  - 1.解决微信宽度问题，分析微信高度问题，已解决未提交
  - 2.将应用moveActivityTaskToBack方法等同给最小化方法，并同时保证任何情况下home不会浮于其他窗口上方
  - 3.初步分析阴影和窗口透明相关问题的矛盾点并探究解决方案，初步发现一个解决方案，但该方案会使得阴影变得比较小
  - 4.分析实现毛玻璃效果高斯模糊的位置和可行性，具体文档之后会给出
  - 5.尝试编译刘总提供的高斯模糊算法应用，编译成功，无法运行，在win10电脑上尝试源码包中的exe执行文件也无法运行
  - 6.分析office登陆界面没有caption的问题，究其原因是因为该界面属于Dialog建立的floating窗口，本就不应该有caption，目前的拟定通过提供一个专门的phonewindow来使得其能够作为一个有caption的floting-window存在，同时解决其内部的窗口显示问题。
  - 7.尝试对特定窗口使用虚拟density数据来改编R中内容的大小，这一改变能够使得部分窗口内容的大小更为合理但会使得其尺寸过小。根据刘总的需求，希望今后能够实现一个强制手机/桌面模式使得其尺寸为强制1920x1080，这样的话就务必要对窗口内容的尺寸进行等比例缩放，同时也会出现在窗口比较小的时候内容过小的情况，因此无论是这种实现方式还是这一需求都有必要进一步考虑其可行性和必要性。

# 2019年03月25日 - - 2019年03月29日 周总结
# 刘晓旭
  - 1.oto8窗口状态记录，包括最大化，全屏，左右停靠
  - 2.oto8窗口修复左右停靠时，横竖切换按钮隐藏不显示
  - 3.分析oto8 狂野飙车8、央视影音、佳能打印打开闪退
    - 央视影音hd：java.lang.UnsatisfiedLinkError: dlopen failed: "/data/user/0/cn.cntvhd/files/libexec.so" has unexpected e_machine，log显示与libexec.so库有关，而在凤凰OS7.1上，可以正常运行，分析与x86库加载有关。
    - 佳能打印：java.lang.NullPointerException: Attempt to invoke virtual method 'android.net.wifi.p2p.WifiP2pManager$Channel android.net.wifi.p2p.WifiP2pManager.initialize，在凤凰OS7.1上，同样无法运行，error相同，对比oto2.0 8.1 分析与WifiP2pManager更新有关。
    - 狂野飙车8：还没有分析出问题。
    
# 罗浩
  - 1.初步完成使用新的PhoneWindow-DecorView结构来完成微信窗口适配的功能
  - 2.分析新版微信内容被遮挡和聊天界面标题栏错位问题，初步解决
  - 3.分析新版本微信点击事件偏移问题，初步解决
  - 4.分析部分应用仍会移动到Launcher下方问题，初步找到解决方案

# 2019年03月25日 - - 2019年03月29日 工作计划
# 刘晓旭
  - 1.设置、保存oto8窗口最大化、docked状态flag，简化代码
  - 2.分析oto8 狂野飙车8、央视影音、佳能打印打开闪退
  - 3.分析oto8 泰瑞呢、buttons and scissors、剪绳子、开心消消乐、模拟炒股、学堂在线等应用标题栏无手机桌面模式切换按钮

# 罗浩
  - 1.oto8 微信适配

# 2019年03月18日 - - 2019年03月22日 周总结
# 刘晓旭
### 本周任务
  - 1.oto8窗口标题栏自动隐藏功能
  - 2.oto2最新版微信聊天界面空白bug

# 罗浩
### 本周任务
  - 1.解决应用图标泛白问题
  - 2.将应用图标容器设置为可滚动，保证不会因为应用图标过多而挤压statusbar的其他内容
  - 3.通过新的thread来进行应用图标lock信息的存储，以保证UI流畅
  - 4.调整启动过程中获取系统应用列表的flag，保证能够完整获取应用列表，不再必需要打开一次开始菜单
  - 5.调整应用图标点击事件，长按图标弹出菜单时不会触发打开应用行为

# 2019年03月18日 - - 2019年03月22日 工作计划
# 刘晓旭
  - 1.oto8窗口标题栏自动隐藏功能
  - 2.设置、保存oto8窗口最大化、docked状态flag，简化代码
  
# 罗浩
  - 1.进入系统后，首次打开开始菜单，任务栏第一个应用图标会泛白（概率复现）
  - 2.修改SystemUI任务栏应用图标显示布局。

# 2019年03月11日 - - 2019年03月15日

# 刘晓旭
### 本周任务
  - 1.oto2：设置-无障碍里的"Pico TTS"需屏蔽
  - 2.oto8：窗口增加全屏按钮
  - 3.oto8：窗口最大化拖动标题栏变为小窗口
  
### 下周任务
  - 1.oto8：窗口标题栏自动隐藏功能
  
# 罗浩
### 本周任务
  - 1.修复对话框（floating-window）无法点击的问题
  - 2.修复最小化全屏窗口时桌面黑屏的问题
  - 3.修复全屏窗口最小化后还原为窗口化的问题
  - 4.另开线程进行taskbar图标的序列化来保证UI流畅（目前未遇到卡顿，但防患于未然）
  - 5.初步分析最小化应用后从打开应用时SystemUI崩溃的问题
  - 6.修改openthos2.0浏览器的apk和初始数据包，以达到修改主页的目的。
  
### 下周任务
  - 1.解决最小化应用后打开应用时SystemUI崩溃的问题
  - 2.其他多窗口问题

# 2019年03月04日 - - 2019年03月08日
# 刘晓旭
### 本周任务
  - 1.测试，提交oto8窗口记忆功能
  - 2.oto8窗口最大化按钮、双击窗口caption进入Fullscreen模式，修改为在Freeform模式下缩放到全屏
  - 3.oto8窗口增加全屏按钮，已完成，未提交
  - 4.oto8窗口最大化时，拖动窗口，窗口还原之前窗口化大小，在调试中。

### 下周任务
  - 1.调研分析，实现oto8窗口最大化时，窗口caption随鼠标hover显示、隐藏
  - 2.其他多窗口问题。

# 罗浩
### 本周任务
  - 1.调整taskbar图表的保存方案，保证其有序性
  - 2.调整AMS和taskbar图标之间的接口数据结构，把从ActivityRecord中获取改为直接从TaskRecord中获取保证图标和TaskRecord的严格绑定关系
  - 3.改用packageName记录之前focus的图标。
  - 4.调整homeActivity相关机制，解决launcher会打开多个，以及全屏下关闭应用laucher会覆盖其他应用的bug
  
### 下周任务
  - 1.其他多窗口相关问题
  - 2.初步尝试将应用适配代码进行整合（以微信为主）

# 2019年02月25日 - - 2019年03月01日
# 刘晓旭
### 本周任务
  - 1.oto8窗口最大化按钮、双击窗口caption进入Fullscreen模式，修改为在Freeform模式下缩放到全屏。
  - 2.oto8窗口记忆功能代码合并，存在问题：应用启动打开，会判断是否遮挡已存在窗口，如果遮挡，应用无法打开，正考察解决方案

### 下周任务
  - 1.oto8窗口在最大化下，caption随鼠标hover显示、隐藏
  - 2.分析考察窗口记忆时，遮挡已存在应用时无法再打开其他应用。
  
# 罗浩
### 本周任务
  - 1.提交之前针对Launcher焦点和SystemUI方面的工作，但仍存在一些细节问题
  - 2.解决部分应用opaque问题
  - 3.修正SystemUI中序列化方法的异常处理
  - 4.修改应用启动流程，使得通常情况下应用会多窗口启动，并提供接口使得系统应用能够设置启动应用的窗口大小
  - 5.修复已存在窗口的packageName发生变化时会多出一个图标的问题
  
### 下周任务
  - 1.解决序列化存取图标乱序问题
  - 2.其他多窗口相关问题
  
# 2019年02月18日 - - 2019年02月22日
# 刘晓旭
### 本周任务
  - oto8窗口记忆功能, 已基本实现功能，还有部分细节需要讨论后确认实现

### 下周任务
  - oto8多窗口其他问题。


# 罗浩
### 本周任务
  - 1.初步实现不遮挡的Launcher获取焦点方案
  - 2.分析并定位部分应用窗口从最大化还原后背景变黑的原因并考察解决方案
  
### 下周任务
  - 基于9.0.0_r30考察多窗口部分8.1的目前工作移植到9.0的工作量。

# 2019年02月11日 - - 2019年02月15日
# 刘晓旭
### 本周任务
  - 1.完善用户手册
  - 2.分析oto8窗口记忆功能实现。

### 下周任务
  - 1.继续分析oto8窗口记忆功能实现。
  
# 罗浩
### 本周任务
  - 1.分析使launcher在不遮挡其他应用的情况下获得焦点的方式，目前认为“不遮挡其他应用的情况下获得焦点”与android在wms端的处理策略相违背，应采用其他逻辑实现所需要的效果
  
### 下周任务
  - 1.继续分析launcher获取焦点的可行性并思考其他方案。

# 2019年01月21日 - - 2019年01月25日
# 刘晓旭
### 本周任务
  - 1.[bug 2162] 目前台式机和笔记本的自动休眠时间是以“用电池时“为准的，应该是“接通电源时“-----------已完成，待提交
  - 2.[bug 2441] [物业需求] 建议在设置以太网页面增加显示当前ip地址的字段，像凤凰os的那样-----------已完成，待提交

### 下周任务
  - 1.解决鼠标点击edit text，出现蓝色光标，拖动光标会提示所在的应用崩溃
  
# 罗浩
### 本周任务
  - 1.初步完成将packageName相同Task合并到一个图标上的基础功能
  - 2.考察Launcher运行在FreeformStack上的可行性和方法，目前完成度为可以将Launcher运行在FreeformStack并能够使其不遮挡其他应用的情况下获得焦点。但是通过修改系统源代码实现的，通过观察SetupWizard，应该存在应用能够自行设定的不覆盖其他应用的设定方法。
  - 3.解决Openthos浏览器触摸板无效问题，未提交
  
### 下周任务
  - 1.探讨并实现更好的解决openthos地址栏显示错位问题的方案。

# 2019年01月14日 - - 2019年01月18日
# 刘晓旭
### 本周任务
  - 1.应用商店默认打开存储权限
  - 2.分析、解决OTOAppStore在OTO8上无法安装应用问题------------已给出应用商店无法安装应用的解决方法，由于其它应用也有此问题，在寻找通用方法

### 下周任务
  - 1.oto8休眠后无法唤醒

# 罗浩
### 本周任务
  - 1.重构部分Taskbar相关代码
  - 2.修改Taskbar图标为应多TaskId
  - 3.新增固定图标持久化功能
  - 4.精简AppInfo内容，使之更合理并适用于持久化方案
  - 5.调整Taskbar的点击事件，使长按和右键能够并存，同时调整Hover对话框的实现方案来解决部分错误并使之更合理
  - 6.初步计划实现将多个packageName相同的Task合并到同一Taskbar图标上，并通过二级菜单来选择操作对象的功能。
  
### 下周任务
  - 1.实现多个packageName相同的Task合并到同一个Taskbar图标上的策略

# 2019年01月07日 - - 2019年01月11日
# 刘晓旭
### 本周任务
  - 1.测试自研应用在oto8上运行情况，以及给出需求优先级列表
  - 2.分析、解决OTOAppStore在OTO8上无法安装应用问题
  
### 下周任务
  - 1.分析、解决OTOAppStore在OTO8上无法安装应用问题
  - 2.分析、解决oto8上其他优先级高问题

# 罗浩
### 本周任务
  - 1.测试微信和办公软件在oto8上的运行情况。
  - 2.尝试解决最新版微信在oto8上运行出现的问题，窗口不自然空白的问题已解决。
  
### 下周任务
  - 1.重构systemui有关statusbar的代码，使之正确地对应到taskId而非packageName
  - 2.尝试一个合理的方案来显示多个packageName相同的task图标

# 2018年12月24日 - - 2018年12月29日
# 刘晓旭
### 本周任务
  - 修改网页版云服务修改密码使token失效，可以弹出登陆窗。但无论输入新密码还是旧密码均无法登陆，提示用户名或密码错误。而在网页版云服务还是输入旧密码才能登陆。只有在设置里解除绑定再重新绑定后，云服务才能正常同步
  - seafile 本地空间通过project quota设置磁盘配额部分代码已完成，seafile GUI部分quota提示等待合并
  - 补充seafile云关于容量quota文档
    - [seafile云容量quota需求、实现文档](https://github.com/openthos/multiwin-analysis/blob/master/seafile/Seafile%20project%20quota%20implementation.md)
    
### 下周任务
  - 待定

# 2018年12月17日 - - 2018年12月21日
# 刘晓旭
### 本周任务
  - 备份还原语言、锁屏密码、机主信息、文件打开偏好、账户、壁纸
  - bug：备份还原也纪录了窗口的大小，如果在两台显示器大小不一样的电脑间备份还原，还原后的最大化窗口会超出屏幕;小屏幕的还原到大屏幕设备上锁屏界面也无法正常显示

### 下周任务
  - 云服务GUI增加quota提示
  
# 罗浩
### 本周任务
  - 分析daemon上实现quota管理的可行性，由于可行性不理想且采用quota project因此放弃
  - 分析浏览器还原相关问题，协助解决该问题
  - 分析新绑定账号看不到文档和图片目录的问题，尝试proot中绑定的方法，自测没问题但得到反馈仍存在问题
  - 分析并同刘晓旭工程师一起确定quota管理方面的逻辑

### 下周任务
  - 解决为解决的bug，协助实现quota管理功能。
  
# 2018年12月10日 - - 2018年12月14日
# 刘晓旭
### 本周任务
  - 增加容量检查 80% 90% 两道门槛
    - 1.seafile使用空间占比超过80%，提醒用户
    - 2.seafile使用空间占比超过90%，自动同步暂停，提醒用户清理本地空间，当占比低于90%时，自动同步继续
  
### 下周任务
  - 待定

# 罗浩
### 本周任务
  - 完成新版本seaf-cli升级工作，并清理proot环境内容
  - 完成切断全部可见task的接口desync-all
  - 定位暂停自动同步api位置并完成python端接口
  - 尝试使用范津同学提供的jar包完成seaf-cli的功能，自行编译openthos能够使用的libjunixsocket库后发现依赖仍不满足，且seaf-daemon无法运行，因此得出改方案暂时无法实施的结论
  - 分析本地同步过程中容量达到上限后只能desync再sync的问题，从代码来看该问题只raise一次，之后当前repo_sync_task便会进入waiting for sync状态且无法结束，具体无法通过desync再sync以外的方式再次开始同步的根本原因尚不明确
  - 协助分析启动是mount相关问题和sync路径冲突等问题，协助规划seaf-cli重置方案
  
### 下周任务
  - 待定

# 2018年12月03日 - - 2018年12月07日
# 刘晓旭
### 本周任务
  - 云服务增加容量检查 80% 90% 两道门槛，阅读并测试代码
  
### 下周任务
  - 完成云服务容量检查机制
  
# 罗浩
### 本周任务
  - 成功编译server代码并成功尝试部暑
  - 解决服务器端
  - 成功编译最新版客户端并成功尝试在proot环境下部署
  - 完成服务器隐藏.开头目录的功能并提供list-remote -a接口
  - 完成服务器不了创建名字为DATA和隐藏目录的功能
  - 完成服务器无法删除名字为DATA和隐藏目录的功能(其他功能稳定后提交)
  - 解决两步验证踢掉其余客户端的bug
  - 实现客户端停止正在同步的clone_task的功能接口

### 下周任务
  - 更新客户端，其它相关问题

# 2018年11月26日 - - 2018年11月30日


# 刘晓旭
### 本周任务
  - 1.测试openthos2.0跨kernel版本、Mesa版本升级
    - [测试结果](https://github.com/openthos/multiwin-analysis/blob/master/multiwindow/liuxx/%E6%B5%8B%E8%AF%95openthos2.0%E8%B7%A8kernel%E7%89%88%E6%9C%AC%E3%80%81Mesa%E7%89%88%E6%9C%AC%E5%8D%87%E7%BA%A7.md)
  - 2.尝试Android[静态分析]smali插桩方式，分析应用glbench无法连接服务器问题，经过分析调试，因smali语法不熟，还无法达到插入smali代码收集log
      信息、修改smali代码调试要求。
    - [具体分析流程](https://github.com/openthos/multiwin-analysis/blob/master/multiwindow/liuxx/Android%20smali%22%E6%8F%92%E6%A1%A9%22%E8%B0%83%E8%AF%95apk.md)

### 下周任务
  - 待定

# 罗浩
### 本周任务
  - 1.解决云服务在只读系统中的运行权限问题
  - 2.确认云服务文件mount策略并提供意见
  - 3.分析云服务在用户名不存在情况下的判断与返回方式
  - 4.进一步分析openthos8.1中微信对话框现实问题，目前根据分析结果有两个解决方案。一种是记录微信中表示对话框显示方式的动画的资源ID值，并根据每次传入的ID对比获取对话框的显示动画方式，根据动画方向判断目前对话框的具体显示位置并重新为其分配符合多窗口环境下微信窗口位置和点击位置共同计算的正确对话框显示位置。第二种方法是在微信专用的DecorView中记录每一次点击事件的具体坐标，并在PopupWindow显示时将其传入。两种方法都需要在PopupWindow中用包名对微信进行过滤，具体效率没有进行过比较。
  
### 下周任务
  - 协助完成云服务服务器方面的功能
  
# 2018年11月19日 - - 2018年11月23日

# 刘晓旭
### 本周任务
  - s1笔记本上gfxbench无法连接服务器的问题，协助系统组分析此问题。
    - [GFXBench应用无法连接服务器问题分析文档](https://github.com/openthos/multiwin-analysis/blob/master/multiwindow/liuxx/GFXBench%20OpenGL%20%E5%88%86%E6%9E%90%E6%96%87%E6%A1%A3.md)

### 下周任务
  - 待定

# 罗浩
### 本周任务
  - 1.初步修复浏览器地址显示和影子标签问题，未提交
  - 2.基本解决8.1微信相机问题，相机HAL部分修改正确性个人拿不准
  - 3.尝试解决8.1微信弹出菜单错位问题
  
### 下周任务
  - 继续解决8.1微信相关问题

# 2018年11月12日 - - 2018年11月16日

# 刘晓旭
### 本周任务
  - 1.gfxbench运行高水平测试时报内存不足错误-----------通过测试定位mesa18.1.8存在此问题，mesa升级到18.1.9后问题消失
  - 2.s1笔记本上gfxbench无法连接服务器的问题--通过黄sir帮忙，已经定位引发此问题的commit ID

### 下周任务
  - 1.[bug 2162]目前台式机和笔记本的自动休眠时间是以“用电池时“为准的，应该是“接通电源时“
  - 2.[bug 2441]在设置以太网页面增加显示当前ip地址的字段
  
# 罗浩
### 本周任务
  - 1.分析8.1微信相机问题。解决窗口化运行微信打开相机提示没有权限问题。初步定位相机无法读取到画面的问题为libcamera/CameraHardware.cpp中，mPreviewHeap没有分配内存导致的。但强制其分配内存会导致录像功能不可用，目前尚不清楚解决方法。
  - 2.尝试解决部分浏览器问题，地址栏不随网页变化而变化问题初步解决，标签消失不彻底问题无法复现，解决存在难度。

### 下周任务
  - 1.待定

# 2018年11月05日 - - 2018年11月09日

# 刘晓旭
### 本周任务
  - 1.测试、提交关于s1笔记本点击以太网gui重启的问题
  - 2.与黄sir沟通关于usb摄像头提示错误信息问题，并测试黄sir提供的解决方案(有些暴力，但目前还没有找到更grateful的处理方法)
  - 3.测试分析s1笔记本上gfxbench无法连接服务器的问题。

### 下周任务
  - 1.待定
  
# 罗浩
### 本周任务
  - 1.分析android-x86 8.1微信无法打开相机的问题，分别从逆向，相机本身，微信运行状态以及显示状态进行了分析。分析结果主要有：1.相机本身存在问题，自带相机应用拍照有一定概率无法成功。2微信全屏模式下可以使用相机，但只能使用一次，使用后需要切换至其他使用相机的应用（如自带相机）再切换回来才可再次使用，疑似是buffer 释放方面的问题。3在竖屏状态下，窗口化的微信在开启相机时不会提示无权限，但仍无法显示相机内容。4通过测试，在手机的分屏模式下，屏幕横置的微信使用相机时也会出现权限问题。目前看来横屏状态下微信提示权限问题大概率属于多窗口方面的问题，而相机本身拍摄方面的问题大概率属于hal层。目前两个问题均未找到解决方案，仍在进一步分析中。
  - 2.阅读和理解了肖落元发来的有关加密的脚本，认为可以直接用在token 上，但之前看微信讨论token 似乎不需要加密。
  - 3.协助分析s1笔记本上gfxbench无法连接服务器的问题。

### 下周任务
  - 1.待定

# 2018年10月29日 - - 2018年11月02日

# 刘晓旭
### 本周任务
  - 1.增加seafile登录成功后获取token的方法
  - 2.解决s1笔记本点击以太网gui重启的问题
  - 3.分析s1笔记本上gfxbench无法连接服务器的问题
  
### 下周任务
  - 1.seafile其他工作安排
  - 2.接着分析s1笔记本上gfxbench无法连接服务器的问题
  
# 罗浩
### 本周任务
  - 1.尝试在只读环境下运行seafile，基本测试通过，能够获取远端数据
  - 2.经测试可以成功跨国所有相机在没有摄像头情况下在java方面发生崩溃的点，但libart的崩溃点无能为力
  - 3.讨论seafile内容的保存地点和保存内容，以及将其置入system分区的方式和权限
  
### 下周任务
  - 1.seafile非GUI 部分工作

# 2018年10月22日 - - 2018年10月26日

# 刘晓旭
### 本周任务
  - 1.云服务gui-----------熟悉代码
  - 2.解决s1笔记本点击以太网gui重启的问题-----------已完成,未提交
  - 3.测试分析s1笔记本上gfxbench无法连接服务器的问题，未定位到问题。
  - 4.测试分析魂斗罗无法运行的问题，最新版应用lib发生变化，所以无法运行

### 下周任务
  - 1.熟悉云服务gui代码
  
# 罗浩
### 本周任务
  - 1.云服务非GUI 完成流程图，修改被动上传的状态提示信息
  - 2.尝试解决相机停止工作问题，目前解决所有java层停止点，lib方面停止点需要其他同事协助
  - 3.协助测试分析S1笔记本上gfxbench和魂斗罗游戏问题

### 下周任务
  - 1.分析GUI 组交付的指令集，等待keeper大框架出来后测试指令集

# 2018年10月15日 - - 2018年10月19日

# 罗浩
### 本周任务
  - 1.解决云服务第一次启动不完整问题，协助解决云服务状态通知问题
  - 2.协助商讨部分云服务问题解决方案
  
### 下周任务  
  - 1.解决云服务以及其他openthos23.0发布相关问题
  
# 2018年09月25日 - - 2018年09月30日

# 罗浩
### 本周任务
  - 1.分析了seadroid app，学习了其免登录机制，并结合分析seaclient的源码提供了使用token验证的解决方案
  - 2.分析了seahub的源码，和负责seahub的同事交流了利用tokoenV2验证来绑定token和登录信息的可行性，并对其进行实验
  - 3.继续通过新方法解决openthos8.1上微信的问题，经过测试新发现了几个问题，其中“发送给朋友”时应用崩溃的问题已解决。
  - 4.分析微信无法接收onConfigurationChanged的原因，经过反编译分析其Activity将自身的Resources成员的获取接口进行覆盖，因此和更新窗口时所更新的config并非同一对象，导致ViewRootImpl判断未发生config变化，并因此无法得到config，因此对于微信来说onConfiguratonChanged中的方法需要考虑将其外置来解决这一问题。目前没有明确发现这一问题的影响。
  - 5.分析了线式缩放导致的缩放过程中不会发生performtraversal的问题，目前没有找到很好的解决方案。
  
### 下周任务  
  - 1.待定
  
# 2018年09月17日 - - 2018年09月21日

# 刘晓旭
### 本周任务
  - 1.初步实现微信应用特殊PhoneWindow及两个特殊DecorView视图结构。
  - 2.协助分析、测试openthos8.1上微信朋友圈图片显示问题，及微信popupwindow弹出位置问题。
  
### 下周任务  
  - 1.继续分析、实现特殊应用设计特殊窗口结构。
  
# 罗浩
### 本周任务
  - 1.初步实现微信应用特殊PhoneWindow及两个特殊DecorView视图结构。
  - 2.解决openthos8.1上微信朋友圈图片显示问题，无法评论问题和登陆界面黑边问题等，初步解决popupwindow弹出位置问题。
  
### 下周任务  
  - 1.继续分析、实现特殊应用设计特殊窗口结构。


# 2018年09月10日 - - 2018年09月14日

# 刘晓旭
### 本周任务
  - 1.初步实现特殊应用设计特殊窗口Phonewindow，DecorView思路，并在微信上尝试设计效果
  - 2.协助分析、测试openthos8.1上微信朋友圈无法评论产生的原因及解决思路
  
### 下周任务  
  - 1.继续分析、实现特殊应用设计特殊窗口结构。
  
# 罗浩
### 本周任务
  - 1.初步实现特殊应用设计特殊窗口Phonewindow，DecorView思路，并在微信上尝试设计了特殊的PhoneWindow，实测能解决微信的在特定界面decorcaption消失的问题。
  - 2.共同分析openthos8.1上微信朋友圈在窗口化下无法评论的原因，证实是由于微信自身没有考虑到多窗口情况造成的错误数据。目前构想了几种能够通过特殊PhoneWindow和DecorView进行解决的解决方案，下周进行尝试。
  
### 下周任务  
  - 1.继续分析、实现特殊应用设计特殊窗口结构。

# 2018年09月03日 - - 2018年09月07日

# 刘晓旭
### 本周任务
  - 1.openthos8.1多窗口DecorCaptionView部分相关文档ppt汇报
  - 2.参加SystemUi和System组技术汇报
  - 3.分析openthos8.1安装应用权限不正确问题，已定位是OtoLauncher修改权限问题，通过修改可以解决此bug

### 下周任务
  - 1.openthos8.1多窗口重写特殊应用DecorView分析规划设计。
  
# 罗浩
### 本周任务
  - 1.完成openthos8.1多窗口文及PPT
  - 2.协助分析openthos8.1的安装第三方应用权限问题，定位于launcher，删除launcher 暂时解决该问题
  - 3.参加其它组的汇报
  - 4.分析窗口结构问题，认为设计特殊的DecorView来让特殊的应用（例如微信）使用是搞笑，便于移植且能够减少对其他应用影响的方法，正在进一步分析已完成规划设计。

### 下周任务
  - 1.openthos8.1多窗口重写特殊应用DecorView分析规划设计。  


# 2018年08月27日 - - 2018年08月31日

# 刘晓旭
### 本周任务
  - 1.总结openthos8.1多窗口DecorCaptionView部分相关文档
  - 2.学习SystemUi和Desktop组项目相关文档
  - 3.分析openthos8.1多窗口DecorCaptionView初始化、显示流程。
  
### 下周任务
  - 1.openthos8.1多窗口分析
  

# 罗浩
### 本周任务
  - 1.总结openthos8.1多窗口相关文档有关状态栏图标及问题定位等内容的相关文档
  - 2.学习SystemUi和Desktop组项目相关文档
  - 3.解决在不对图片进行旋转情况下的全部微信编辑图片问题，但不明确对性能的影响程度。
  - 4.解决8.1中窗口横竖屏不稳定切换的bug，下周提交。
  
### 下周任务
  - 1.openthos8.1多窗口分析
  
# 2018年08月20日 - - 2018年08月24日

# 刘晓旭
### 本周任务
  - 1.浏览器下载图片通过photoviewer打开时窗口上下出界
  - 2.ms office密码登录界面空白
  
### 下周任务
  - 1.openthos8.1多窗口分析与规划
  
# 罗浩
### 本周任务
  - 1.协助解决photoviewer和office问题
  - 2.初步解决部分微信编辑图片问题，但不确定目前解决方案是否能解决剩余问题和具备可用性
  
### 下周任务
  - 1.确保openthos-2.0正常的基础上openthos8.1多窗口分析与规划

# 2018年08月13日 - - 2018年08月17日

# 刘晓旭
### 本周任务
  - 1.pcmark运行卡顿，通过测试，pcmak全屏模式运行，没有卡顿问题，但任务栏不显示图标，此问题经过罗浩修改已解决，经过测试pcmark全屏运行正常，任务栏正常显示应用图标。
  - 2.协助解决goole play因多窗口造成crash的问题。

### 下周任务
  - 1.待定

# 罗浩
### 本周任务
  - 1.协助解决PCmark问题
  - 2.分析openthos-8可能需要解决的问题

### 下周任务
  - 1.待定

# 2018年08月06日 - - 2018年08月10日

# 刘晓旭
### 本周任务
  - 1.分析微信编辑图片光标错位问题，通过测试分析，微信图片编辑界面的所有views的location都正确，没有错位，而编辑的图片是通过surfaceview显示的，当decorview的ondraw方法执行完后，就开始执行图片的ondraw方法，这时候图片的offset就是decorview的offset，所以location错位，虽然知道了offset，但是无法确定图片具体获取offset的方式，也就无法修正图片的offset值，所以暂时无法解决此问题。
  - 2.帮忙分析测试pcmark运行卡顿的问题，通过对比凤凰Os、技德Os、oreo-x86、手机上pcmark运行情况，发现凤凰Os上pcmark运行crash，技德Os、oreo-x86、手机上pcmark在切换窗口或最小化时，会终止当前测试，而在openthos上当pcmark运行测试时，切换窗口，出现卡顿的概率增加，而运行测试时，设备不进行其他操作，则能正常跑完全部测试。
  
### 下周任务
  - 待定

# 2018年07月30日 - - 2018年08月03日

# 刘晓旭
### 本周任务
  - 1.微信朋友圈无法评论和点赞
  - 2.WPS关闭文档会提示停止运行,user版不存在此问题，且通过分析测试，此问题不是因framework/base改动引发的，通过回滚版本，此问题出现在6月28号版本，而对比6月27号版本，只有mesa存在差异，由于现在无法降低mesa版本来分析是否与此问题有关，所以此问题暂延后处理。
  
### 下周任务
  - 1.openthos-1.1bug修复
  - 2.openthos-2.0多窗口相关问题分析解决

# 2018年07月23日 - - 2018年07月27日

# 刘晓旭
### 本周任务
  - 1.微博点击系统更新，微博崩溃退出，AutoCAD 点击更新也会崩溃
  - 2.WPS关闭文档会提示停止运行,通过测试分析，user 版不存在此问题，开发版存在此问题，还没有定位到问题点。

### 下周任务
  - 待定

# 罗浩

### 本周任务
  - 1.找到初步方案解决浏览器滚动条问题
  - 2.协助分析浏览器无法编入镜像问题（贡献极小）
  
### 下周任务
  - 未定

# 2018年07月16日 - - 2018年07月20日

# 刘晓旭

### 本周任务
  - 1.分析WPS鼠标滚轮+Ctrl缩放时，Ctrl键粘滞问题，经过测试，分析发现此问题是最新版WPS才出现的，老版本的WPS不存在此问题，通过对比凤凰OS、手机WPS发现，WPS最新版自带缩放功能，而openthos早期单独适配过缩放功能，通过分析发现两种缩放的事件存在冲突，经过协商决定禁掉openthos的缩放功能，来解决此Ctrl粘滞问题。
  
### 下周任务
  - 待定
  
# 罗浩

### 本周任务
  - 1.尝试解决浏览器滚动条缩放后不显示问题，没有进展，感觉该问题很难解决
  - 2.提供解决微信QQ 通知消息问题的解决方案给System UI组
  
### 下周任务
  － 没有其他问题的话继续尝试解决滚动条问题

# 2018年07月09日 - - 2018年07月13日

# 刘晓旭

### 本周任务
  - 1.微信朋友圈视频播放横屏（0615）建议微信窗口额外添加手动设置视频横竖屏切换的功能-----------100%
  - 2.谷歌输入法按键粘滞问题分析,无法找到问题必先操作，暂时没找到定位问题办法。
  
### 下周任务
  - 待定


# 罗浩

### 本周任务
  - 1.协助完成微信播放视频相关bug
  - 2.提交解决白板tab问题的浏览器版本
  - 3.分析浏览器滚动条错位问题
  
### 下周任务
  - 待定


# 2018年07月02日 - - 2018年07月06日

# 刘晓旭
  - 1.选择始终显示任务栏可能会导致打开的窗口左侧和上方有空白，且无法移动
  - 2.微信中无法直接打开网页链接
  - 3.鼠标移到头像上时，弹出的语音通话位置偏移且不固定
  
### 下周任务
  - 待定



# 2018年06月25日 - - 2018年06月29日

# 刘晓旭

### 本周任务
  - 1.微信中无法直接打开网页链接---------------------周一提交
  - 2.鼠标移到头像上时，弹出的语音通话位置偏移且不固定---------------------已完成，未提交
  - 3.协助分析Termux尺寸显示不正常

### 下周任务
  - 1.微信朋友圈视频播放横屏
  - 2.选择始终显示任务栏可能会导致打开的窗口左侧和上方有空白，且无法移动

# 罗浩

### 本周任务
  - 1.搭建Web extension 的开发环境
  - 2.完成自研插件的开发
  - 3.完成通过插件更改user agent 的方案
  - 4.增加主菜单中addons管理页面的入口
  - 5.解决firefox 同步账号注册验证邮箱地址持续loading 的bug
  - 6.分析白板页面问题，认为何fennec 代码无关和openthos相关并给出证据（不会出现该问题的版本以及在特定版本上官方firefox 也会出现该问题）
  - 7.整合新版本fennec 代码并做好提交补丁。
  
### 下周任务
  - 1.听从安排完成多窗口/fennec 部分任务。

# 2018年06月18日 - - 2018年06月22日

# 刘晓旭

### 本周任务
  - 1.系统重置后无法使用有线网络(系统底层原因，已有系统组解决)
  - 2.央视影音HD切换清晰度时窗口崩溃----------------------100％
  - 3.微信中无法直接打开网页链接－－已经可以解决，目前发现有更好的解决方案，正在调试

### 下周任务
  - 1.微信中无法直接打开网页链接－－尝试更彻底的解决办法

# 2018年06月11日 - - 2018年06月15日

# 刘晓旭

### 本周任务
  - 1.协助改进任务栏自动隐藏－－完成
  - 2.微信中无法直接打开网页链接－－已经可以解决，目前发现有更好的解决方案，正在调试
  - 3.快捷键Ctrl＋ALT＋T 快速启动termux-－－已完成
  - 4.bug：快捷键fn＋F7 启动email，多次启动，应用卡顿－－完成
  
### 下周任务
  - 1.微信中无法直接打开网页链接
  - 2.微信字体显示一半（小程序字体输入）
  - 3.微信朋友圈视频播放横屏

# 罗浩

### 本周任务
  - 1.完成浏览器默认缩放相关功能并提供测试版本
  - 2.分析提出的浏览器bug，初步判断除去已经解决尚未提交的电机错问问题其余均为不应由openthos方面解决的问题
  - 3.对于网页默认缩放无法fit-width的需求进行考察，目前尚未发现能够使其fit-width的默认缩放方式
  
### 下周任务
  - 1.继续完成默认缩放使网页fit-width的功能

# 2018年06月4日 - - 2018年06月08日

# 刘晓旭

### 本周任务
  - 1.协助改进任务栏自动隐藏
  - 2.termux快捷键; 例如: ubuntu的ctrl + win +up----------已完成，需王之旭配合
  - 3.鼠标颜色调整------------需要图片
  - 4.分析解决微信问题如下：
    - 编辑图片时界面混乱---------------多窗口设计问题
    - 切换聊天窗口时界面抖动--------------多窗口设计问题
    - 朋友圈滑动图片会缩小----------------微信本身问题
    
### 下周任务
  - 1.其它多窗口bug的解决
  
# 罗浩

### 本周任务
  - 1.全面分析浏览器缩放方式，基本实现了不抖动，不损害性能且能够跟随鼠标滚轮实时高效并中心聚焦的页面缩放方法。
  - 2.分析页面默认大小相关代码，尚未找到能够灵活根据系统的dpi对页面默认大小进行中心聚焦地缩放的方法。
  - 3.进一步适应完全是用Openthos办公
  
### 下周任务
  - 1.继续完成页面默认大小相关功能
  - 2.其它多窗口bug的解决

# 2018年05月28日 - - 2018年06月01日

# 刘晓旭

### 本周任务
  - 1.完全使用openthos办公
  - 2.多窗口性能优化(应用关闭后保留进程以提高后续应用启动速度)
  - 3.微信解决长按弹出的菜单无法选中，公众号无法取消关注 / 右键菜单躲猫猫
  - 4.termux快捷键; 例如: ubuntu的ctrl + win +up----快捷键功能已实现，termux本身有bug，未提交
  
### 下周任务
  - 1.微信多窗口bug的解决


# 罗浩

### 本周任务
  - 1.完全使用openthos办公
  - 2.完善浏览器鼠标错位问题的修复
  - 3.添加useragent切换的图标显示更改功能
  - 4.初步实现同时满足微信网页版等网页和firefox sync的user-agent策略
  - 5.实现聚焦中心的缩放方式
  - 6.实现基于ctrl和鼠标滚轮的缩放方式，在去掉ctrl+鼠标滚轮事件转化的opethos上测试不稳定。
  - 7.基本完成fennec主题的适配
  
### 下周任务
  - 1.完成浏览器bug解决和功能的完善并测试、提交
  - 2.其它多窗口bug的解决

# 2018年05月21日 - - 2018年05月25日

# 刘晓旭

### 本周任务
  - 1.多窗口性能优化, 经分析frameworks方面的性能问题已成顽疾，无从解决
  - 2.分析android8.1 动画执行流程，修改默认关闭动画
  
### 下周任务
  - 1.Openthos1.1 微信多窗口的bug
  
# 罗浩

### 本周任务
  - 1.协助分析性能问题，认为frameworks方面的性能问题无从解决
  - 2.解决浏览器鼠标错位问题
  - 3.尝试新的缩放策略实现，基本实现通过jni模拟pinch缩放的实现方法
  - 4.尝试修复启用theme时自定义图标显示问题，目前有一种解决方案但效果不是很好，正在寻找新的解决方案。
  - 5.基本解决openthos-2.0上微信的问题
  
### 下周任务
  - 1.完成浏览器bug解决和功能的完善并测试、提交
  - 2.其它多窗口bug的解决

# 2018年05月14日 - - 2018年05月18日

# 刘晓旭

### 本周任务
  - 1.[bug 1546] 设置中右键wifi，会出现两个弹出菜单重叠在一起
  - 2.文本编辑菜单添加”全选“功能按钮。
  - 3.[bug 913] WPS编辑ppt时，插入图表，点击柱状图，下拉菜单弹到左上角，且无法选中

### 下周任务
  - 1.分析8.1多窗口动画执行流程

# 罗浩

### 本周任务
  - 1.集成新的窗口结构到8.1中
  - 2.解决findViewById的问题
  - 3.解决微信666版本闪退的问题
  - 4.尝试分析并解决微信等应用开新的activity时会有黑边的问题，目前定位两个问题点。一种可能性是surface的长宽分配出了问题（普遍存在）。另一种是从Activity开启新的Activity时出了问题，目前这种情况之后在从一个activity中开启另一个activity时才会出现。用StartupMenu打开不会出现该问题。下周进一步分析并解决该问题。
  
### 下周任务
  - 1.分析并解决黑边问题
  - 2.参与解决Android Studio for openthos方面问题

# 2018年05月07日 - - 2018年05月11日

# 刘晓旭

### 本周任务
  - 1.[bug2421] 强行停止权限管理器后重新打开，粗略位置不生效
  - 2.[bug 2423] 学堂在线进入一个课程，点击左下角去上课（需登录），点视频中的开始学习，应用崩溃
  - 3.[bug 2094] mp3以系统音乐打开时，只可选择暂停和拖动进度条，无法关闭和移动音乐窗口,通知栏也不显示音乐正在播放
  - 4.[bug 913] WPS编辑ppt时，插入图表，点击柱状图，下拉菜单弹到左上角，且无法选中
  - 5.bug 打印机窗口位置不正确。
  - 6.bug 设置-wifi-右键高级选项下属窗口位置不正确
  - 7.bug 复制、剪切、粘贴窗口位置不正确
  
### 下周任务
  - 1.在文本编辑的窗口上增加全选功能


# 罗浩

### 本周任务
  - 1.将54个8.0的multiwindow补丁全部打到8.1上。
  - 2.解决systemui接口相关问题
  - 3.解决statusbar无法点击问题
  - 4.解决Launcher3持续崩溃问题
  - 5.暂时取消窗口缩放模式的限制，暂时关闭缩引发的relaunch，来保证应用运行更稳定。经测试如此做之后暂时没有再出现窗口错位。
  - 6.处理setRequestedOrientation，处理方法为调用changeOrientation
  - 7.在真机上进行测试，发现长时间睡眠后无法唤醒问题。
  - 8.将目前multiwindow-oreo的工作提交到服务器上
  - 9.尝试在最新版openthos上运行android studio成功
  
### 下周任务
  - 1.听从下一阶段安排

# 2018年05月02日 - - 2018年05月04日

# 刘晓旭

### 本周任务
  - 1.[bug2414] 1366笔记本，切换到160dpi，无法切换回120dpi  完成
  - 2.[bug2366] 台式机上首次配置中默认dpi仍显示为笔记本1920  完成
  - 3.[bug2421] 强行停止权限管理器后重新打开，粗略位置不生效。 已找到不生效原因，正在修改。
  
### 下周任务
  - 1.[bug2421] 强行停止权限管理器后重新打开，粗略位置不生效
  - 2.[bug2423]学堂在线进入一个课程，点击左下角去上课（需登录），点视频中的开始学习，应用崩溃

# 罗浩

### 本周任务
  - 1.基本明白了窗口leak和缩放窗口错位的原因。个人认为改为线框方式进行缩放能够避免该问题。进一步修改该问题的方法主要源于在DecorView的上层所使用的View仍应该是DecorView类。这里初步的设计是对DecorView和OpenthosDecor（暂定名）进行分析总结，让OpenThosDecor仍作为DecorView类（以此来适配所有通过Instanceof判断的内容）存在并位于DecorView的上层，位于窗口结构的顶层。其内部包含DecorCaption，包含一个contentparent，该contentparent内部只有DecorView，应用可见的ViewRoot仍为DecorView，系统可见的则为OpenThosDecor。目前
